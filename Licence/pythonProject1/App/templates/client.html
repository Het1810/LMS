<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <title>Client</title>-->
<!--</head>-->
<!--<body>-->
<!--    <h4>Hello Welcome to the client dashboard</h4>-->
<!--    <h1>Welcome, {{ user.username }}!</h1>-->
<!--    <a href="{% url 'client_add' %}" class="btn btn-light">Add Client</a>-->
<!--    <a href="{% url 'logout' %}" class="btn btn-dark">Logout</a>-->
{% include 'header.html' %}
{% load static %}
<script src="{% static 'custom.js' %}"></script>

    <h1>Welcome, {{ user.username }}!</h1>
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>Contact</th>
                    <th>Created at</th>
                    <th>Updated at</th>
                    <th>Edit/Delete/View_Licence</th>
                </tr>
            </thead>
            <tbody>
                {% for item in data %}
                    <tr>
                        <td>{{ item.id }}</td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.email }}</td>
                        <td>{{ item.address }}</td>
                        <td>{{ item.contact }}</td>
                        <td>{{ item.created_at }}</td>
                        <td>{{ item.updated_at }}</td>
                        <td>
                            <a href="{% url 'edit_client' client_id=item.id %}">Edit</a>/
                            <a href="#" onclick="confirmDelete('{{ item.id }}', '{{ item.name }}')">Delete</a>/
                            <a href="{% url 'licence' client_id=item.id %}">View_Licence</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% include 'footer.html' %}
<!--    <script>-->
<!--        function confirmDelete(clientId, clientName) {-->
<!--            var confirmDelete = confirm("Are you sure U want to delete " + clientName + "?");-->
<!--            if (confirmDelete) {-->
<!--                clientDelete(clientId);-->
<!--            }-->
<!--        }-->

<!--        function clientDelete(clientId){-->
<!--            var csrftoken = getCookie('csrftoken');-->

<!--            var deleteUrl = '/client/delete/' + clientId + '/';-->

<!--            $.ajax({-->
<!--                type: 'POST',-->
<!--                url: deleteUrl,-->
<!--                data: {},-->
<!--                beforeSend: function(xhr) {-->
<!--                    xhr.setRequestHeader('X-CSRFToken', csrftoken);-->
<!--                },-->
<!--                success: function(data) {-->
<!--                    if (data.success) {-->
<!--                        // Handle success, e.g., update the table or UI-->
<!--                        alert('Data deleted successfully!');-->
<!--                        // Refresh the page-->
<!--                        location.reload();-->
<!--                    } else {-->
<!--                        // Handle failure-->
<!--                        alert('Failed to delete data.');-->
<!--                    }-->
<!--                },-->
<!--                error: function(xhr, textStatus, errorThrown) {-->
<!--                    // Handle AJAX error-->
<!--                    alert('AJAX Error: ' + textStatus);-->
<!--                }-->
<!--            });-->
<!--        }-->

<!--        function getCookie(name) {-->
<!--            var cookieValue = null;-->
<!--            if (document.cookie && document.cookie !== '') {-->
<!--                var cookies = document.cookie.split(';');-->
<!--                for (var i = 0; i < cookies.length; i++) {-->
<!--                    var cookie = cookies[i].trim();-->
<!--                    // Check if the cookie has the specified name-->
<!--                    if (cookie.substring(0, name.length + 1) === (name + '=')) {-->
<!--                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));-->
<!--                        break;-->
<!--                    }-->
<!--                }-->
<!--            }-->
<!--            return cookieValue;-->
<!--        }-->
<!--    </script>-->

<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->
<!--var deleteUrl = '/client/delete/' + clientId + '/';-->
<!--               window.location.href = deleteUrl;-->